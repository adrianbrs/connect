{"version":3,"sources":["src/lib/p2p/rtc-video.vue","src/views/Call.vue"],"names":[],"mappings":";;;;;;;ACuFA;;AACA;eDnFA;AACA,ACmFA,EDnFA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,WADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GADA;AAOA,EAAA,KAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,KAAA,CAAA,KAAA,CAAA,SAAA,GAAA,KAAA,MAAA;AACA;AAHA,GAPA;AAYA,EAAA,OAZA,qBAYA;AACA,SAAA,KAAA,CAAA,KAAA,CAAA,SAAA,GAAA,KAAA,MAAA;AACA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,WAAA,KAAA,CAAA,KAAA,CAAA,IAAA;AACA;AAHA;AAfA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCsFA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,KAAA,EAAA,SADA;AAEA,IAAA,SAAA,EAAA;AAFA,GADA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAIA,GAVA;AAWA,EAAA,KAAA,EAAA;AACA,wBADA,8BACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,iBAAA;AACA,WAAA,KAAA,CAAA,YAAA,CAAA,SAAA,GAAA,KAAA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA;AAJA,GAXA;AAiBA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AACA,WAAA,QAAA,GAAA,MAAA,CAAA,IAAA,CAAA,MAAA,EAAA,CAAA,IAAA,MAAA,CAAA,kBAAA,CAAA;AACA,WAAA,SAAA,CAAA;AAAA,eAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AAAA,OAAA;AACA;AAJA;AAjBA","file":"Call.53ab13ae.js","sourceRoot":"..","sourcesContent":["<template>\n  <video ref=\"video\" playsinline />\n</template>\n\n<script>\nexport default {\n  props: {\n    stream: {\n      type: MediaStream,\n      required: false\n    }\n  },\n  watch: {\n    stream() {\n      this.$refs.video.srcObject = this.stream;\n    }\n  },\n  mounted() {\n    this.$refs.video.srcObject = this.stream;\n  },\n  methods: {\n    play() {\n      this.$refs.video.play();\n    }\n  }\n};\n</script>","<template>\n  <c-room\n    :room-id=\"$route.params.id\"\n    :username=\"username\"\n    signaling-url=\"https://btlyh.sse.codesandbox.io\"\n    ref=\"room\"\n  >\n    <template #default=\"{connected, peers, streams}\">\n      <div id=\"call\">\n        <section class=\"left\">\n          <div class=\"side-buttons\">\n            <div class=\"title\" tabindex=\"0\">\n              <i class=\"mdi mdi-chat icon-large\"></i>\n              <span>Mensagens</span>\n              <i class=\"arrow mdi mdi-chevron-down\"></i>\n\n              <ul class=\"title-dropdown\">\n                <li tabindex=\"-1\">\n                  <i class=\"mdi mdi-chat icon-large\"></i>\n                  <span>Mensagens</span>\n                </li>\n                <li tabindex=\"-1\">\n                  <i class=\"mdi mdi-attachment icon-large\"></i>\n                  <span>Arquivos</span>\n                </li>\n                <li tabindex=\"-1\">\n                  <i class=\"mdi mdi-account-group icon-large\"></i>\n                  <span>Pessoas</span>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <ul class=\"messages-list scrollbar\">\n            <li v-for=\"i in 10\" :key=\"i\">\n              <strong class=\"username\">Salom√£o Neto</strong>\n              <p\n                class=\"text\"\n              >Lorem ipsum dolor, sit amet consectetur adipisicing elit. Porro quis exercitationem, deserunt nihil odit suscipit! Amet laborum dolorem sequi. Nesciunt eveniet molestiae iste sit recusandae quo dignissimos placeat dolorum delectus?</p>\n              <time class=\"time\">11:00</time>\n            </li>\n          </ul>\n          <form @submit.prevent class=\"composer\">\n            <textarea rows=\"2\" placeholder=\"Escreva aqui...\"></textarea>\n          </form>\n        </section>\n        <div class=\"main-video\">\n          <video ref=\"currentVideo\" class=\"main-video\" playsinline autoplay muted></video>\n          <div class=\"action-buttons\">\n            <button class=\"action-button\" @click=\"$refs.room.getDisplayMedia()\">\n              <i class=\"mdi mdi-monitor-screenshot\"></i>\n            </button>\n\n            <button class=\"action-button\">\n              <i class=\"mdi mdi-microphone\"></i>\n            </button>\n            <button class=\"action-button hangup\">\n              <i class=\"mdi mdi-phone-hangup\"></i>\n            </button>\n            <button class=\"action-button\" @click=\"$refs.room.getUserMedia({ audio: true, video: false })\">\n              <i class=\"mdi mdi-video\"></i>\n            </button>\n            <button class=\"action-button\">\n              <i class=\"mdi mdi-fullscreen\"></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"remote-medias scrollbar\">\n          <button v-if=\"!connected\" @click=\"connect()\">Conectar</button>\n\n          <div class=\"remote-media\" v-for=\"(peer, id) in peers\" :key=\"id\">\n            <c-rtc-video\n              v-for=\"stream in streams[id]\"\n              :key=\"stream.id\"\n              :stream=\"stream\"\n              autoplay\n              muted\n              playsinline\n            />\n            <strong class=\"username\">{{ peer.name }}</strong>\n          </div>\n        </div>\n      </div>\n    </template>\n  </c-room>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport { Room } from \"../lib/p2p\";\nimport RTCVideo from \"../lib/p2p/rtc-video\";\n\nexport default {\n  components: {\n    CRoom: Room,\n    CRtcVideo: RTCVideo\n  },\n  data() {\n    return {\n      connected: false,\n      username: \"\"\n    };\n  },\n  watch: {\n    \"$refs.room.streams\"() {\n      console.log('Stream updated!')\n      this.$refs.currentVideo.srcObject = this.$refs.room.streams[0];\n    }\n  },\n  methods: {\n    connect() {\n      this.username = String(Math.random()) || prompt(\"Qual o seu nome?\");\n      this.$nextTick(() => this.$refs.room.connect());\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n.scrollbar {\n  &::-webkit-scrollbar {\n    background: none;\n    width: 0.5em;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #333;\n    border-radius: 0.809em;\n\n    &:hover {\n      background: #444;\n    }\n\n    &:active {\n      background: #FFF;\n    }\n  }\n}\n\n#call {\n  width: 100%;\n  height: 100%;\n  display: grid;\n  background: #1b1b1b;\n  grid-template-areas: 'chat video' 'chat users';\n  grid-template-rows: 1fr 140px;\n  grid-template-columns: 320px 1fr;\n\n  .left {\n    grid-area: chat;\n    color: #FFF;\n    display: flex;\n    flex-flow: column;\n\n    .side-buttons {\n      .icon-large {\n        font-size: 1.618em;\n        vertical-align: middle;\n      }\n\n      .title {\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n        position: relative;\n        outline: none;\n        padding: 0.5em 0 0.25em 0;\n\n        .mdi {\n          margin: 0 0.25em 0 0.5em;\n        }\n\n        .arrow {\n          margin-left: 0.25em;\n        }\n\n        &-dropdown {\n          position: absolute;\n          top: 100%;\n          list-style: none;\n          background: #444;\n          width: 100%;\n          display: none;\n          box-shadow: 0 8px 8px rgba(0, 0, 0, 0.25);\n          border: 1px solid #333;\n          border-radius: 1em;\n          overflow: auto;\n          max-height: 320px;\n\n          li {\n            display: flex;\n            align-items: center;\n            padding: 0.25em 0;\n\n            &:hover {\n              background: #333;\n            }\n          }\n        }\n\n        &:focus {\n          .title-dropdown {\n            display: block;\n          }\n        }\n      }\n    }\n\n    .messages-list {\n      flex: 1;\n      list-style: none;\n      overflow: auto;\n      margin-left: 0.809em;\n      margin-right: 0.25em;\n\n      li {\n        background: #333;\n        margin: 0.25em 0.5em 0.5em 0;\n        padding: 0.809em 0.809em 0.5em 0.809em;\n        border-radius: 0 1em 1em 1em;\n        font-size: 0.9375em;\n        color: #E0E0E0;\n\n        .username {\n          display: block;\n          margin: 0 0 0.25em 0;\n          color: #FFF;\n        }\n\n        .time {\n          display: block;\n          text-align: right;\n          font-size: 0.8em;\n          color: #AAA;\n        }\n      }\n    }\n\n    .composer {\n      display: flex;\n      margin: 0.25em 0.5em 0 0.809em;\n\n      textarea {\n        flex: 1;\n        border: none;\n        background: none;\n        border-radius: 0.809em;\n        padding: 0.809em;\n        color: #FFF;\n        outline: none;\n        resize: none;\n\n        &:focus {\n          background: #333;\n        }\n      }\n    }\n  }\n\n  .main-video {\n    display: block;\n    grid-area: video;\n    background: blue;\n    position: relative;\n\n    .action-buttons {\n      position: absolute;\n      bottom: 1em;\n      left: 50%;\n      transform: translate(-50%, 0);\n\n      .action-button {\n        border: none;\n        font-size: 1.3em;\n        color: #FFF;\n        width: 48px;\n        height: 48px;\n        cursor: pointer;\n        border-radius: 64px;\n        background: rgba(0, 0, 0, 0.25);\n\n        &:hover {\n          background: rgba(0, 0, 0, 0.5);\n        }\n\n        &.hangup {\n          background: #F00;\n          width: 54px;\n          height: 54px;\n          font-size: 1.618em;\n        }\n      }\n    }\n  }\n\n  .remote-medias {\n    grid-area: users;\n    overflow: hidden;\n    overflow-x: auto;\n    white-space: nowrap;\n    padding: 0.809em;\n    direction: rtl;\n\n    .remote-media {\n      display: inline-block;\n      font-size: 0.809em;\n      color: #e0e0e0;\n      width: 80px;\n      margin-right: 0.5em;\n\n      video {\n        background: red;\n        width: 100%;\n        height: 80px;\n        margin: 0 auto;\n      }\n\n      strong {\n        display: block;\n        text-align: center;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        width: 100%;\n        height: 3em;\n      }\n    }\n  }\n}\n</style>"]}